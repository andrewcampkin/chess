<!-- //html page to test testchess.js -->
<!-- TODO, put in turns and stuff next.  also figure out displaying the board graphically and capturing mouse events on the canvas -->
<!DOCTYPE html>
<html>
    <head>
	<script src="testchess.js"></script>
        <script>
    var imgArray = new Array();
    var img = new Image();
    img.src = "chessBoardImage.png";
    imgArray[0] = img;
    var blackPawn = new Image();
    blackPawn.src = "Pawn_Black-10.png";
    imgArray[12] = blackPawn;
    var blackRook = new Image();
    blackRook.src = "Rook_Black-10.png";
    imgArray[11] = blackRook;
    var blackKnight = new Image();
    blackKnight.src = "Knight_Black-10.png";
    imgArray[10] = blackKnight;
    var blackBishop = new Image();
    blackBishop.src = "Bishop_Black-10.png";
    imgArray[9] = blackBishop;
    var blackQueen = new Image();
    blackQueen.src = "Queen_Black-10.png";
    imgArray[8] = blackQueen;
    var blackKing = new Image();
    blackKing.src = "King_Black-10.png";
    imgArray[7] = blackKing;
    var whitePawn = new Image();
    whitePawn.src = "Pawn_White-10.png";
    imgArray[6] = whitePawn;
    var whiteRook = new Image();
    whiteRook.src = "Rook_White-10.png";
    imgArray[5] = whiteRook;
    var whiteKnight = new Image();
    whiteKnight.src = "Knight_White-10.png";
    imgArray[4] = whiteKnight;
    var whiteBishop = new Image();
    whiteBishop.src = "Bishop_White-10.png";
    imgArray[3] = whiteBishop;
    var whiteQueen = new Image();
    whiteQueen.src = "Queen_White-10.png";
    imgArray[2] = whiteQueen;
    var whiteKing = new Image();
    whiteKing.src = "King_White-10.png";
    imgArray[1] = whiteKing;
        </script>
	<!-- script src="chess.js"></script -->
    </head>
    <body>
	<p>Move a piece</p>
	<form name="chessForm">
	    X Start: <input type="text" name="xStart" /><br />
	    Y Start: <input type="text" name="yStart" /><br />
            X End: <input type="text" name="xEnd" /><br />
	    Y End: <input type="text" name="yEnd" /><br />
            <input type="hidden" name="chessString" />
	    <input type="submit" value="Submit" />
	</form>
	<canvas id="chessCanvas" width="800" height="800"></canvas>
	<!-- script type="text/javascript">
            //draw the chess game screen here
	    var canvas=document.getElementById('chessCanvas');
	    var ctx=canvas.getContext('2d');
	    ctx.fillStyle='#FF0000';
	    ctx.fillRect(0,0,80,100);
	</script -->
	<script type="text/javascript">
            function getFieldValue (strFieldName)
            {
                var strFieldValue;
                var objRegExp = new RegExp(strFieldName + "=([^&]+)","gi");
                if (objRegExp.test(location.search))
                    strFieldValue = unescape(RegExp.$1);
                else strFieldValue="";
            return strFieldValue;
            }
        </script>
        <script type="text/javascript">
            //this runs after the submit button gets hit, ie on page load.
            //pass the input values to the chess game code here somehow
            
            var chessState = getFieldValue("chessString");
            var testchess = new ChessBoard(chessState);
            var xStart = getFieldValue("xStart");
            var yStart = getFieldValue("yStart");
            var xEnd = getFieldValue("xEnd");
            var yEnd = getFieldValue("yEnd");
            var result = testchess.movehandler(xStart, yStart, xEnd, yEnd);
            
            document.chessForm.chessString.value = testchess.boardState;
            testchess.printBoard();
            var canvas = document.getElementById('chessCanvas');
            var ctx = canvas.getContext("2d");
            testchess.drawBoard(ctx, imgArray);
        </script>
    </body>
</html>